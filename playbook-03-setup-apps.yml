---
# Prepare applications deploiment
# 
# Applied configurations:
# 
# - A `deployer` user account, used for application deployment.  
#   Credentials and authentication keys are defined per server in `host_vars`.
# - Ensure applications dependencies available as packages are installed.
# - Setup vhosts
#     - Configure nginx
#     - Create directories with proper permissions
#     - Setup log rotation
# - Create applications databases (and users)
#
- name: Create web account
  hosts: webservers
  remote_user: administrator
  become: yes
  roles:
    - deployable
    - extra-packages
    - vhosts
    - databases
